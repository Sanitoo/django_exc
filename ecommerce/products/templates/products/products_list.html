
<h1>Products</h1>

<form method="get" style="margin-bottom: 20px;">
    <input 
        type="text" 
        name="q" 
        placeholder="Search products..." 
        value="{{ query }}" 
    />
    
 <select name="category">
        <option value="">All Categories</option>
        {% for cat in categories %}
            <option value="{{ cat.id }}" 
                {% if cat.id|stringformat:"s" == selected_category %}selected{% endif %}
            >
                {{ cat.name }}
            </option>
        {% endfor %}
    </select>
        <button type="submit">Filter</button>
</form>
    
<a href="{% url 'product_create' %}">Add New Product</a>

<ul>
  {% for product in products %}
    <li>
      <strong>{{ product.name }}</strong> - ${{ product.price }}
      <br>Category: {{ product.category.name }}
      <br>
    </li>
  {% empty %}
    <li>No products yet.</li>
  {% endfor %}
</ul>

<hr>

<!-- ðŸ”¢ Pagination Controls -->
<div>
  {% if page_obj.has_previous %}
      <a href="?page={{ page_obj.previous_page_number }}&q={{ query }}&category={{ selected_category }}">Previous</a>
  {% endif %}

  <span>Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}</span>

  {% if page_obj.has_next %}
      <a href="?page={{ page_obj.next_page_number }}&q={{ query }}&category={{ selected_category }}">Next</a>
  {% endif %}
</div>

<hr>

<a href="{% url 'category_list' %}">View Categories</a>
